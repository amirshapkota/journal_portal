# Achievements System - Badges & Awards Documentation

## Overview

The achievements system automatically recognizes and rewards users for their contributions as reviewers and authors. All badges and most awards are granted automatically without manual intervention.

---

## ðŸŽ–ï¸ Reviewer Badges

### How They Work
Badges are **automatically awarded in real-time** when a reviewer completes a review. The system uses Django signals to detect when a `ReviewAssignment` status changes to `COMPLETED` and immediately awards all applicable badges based on the reviewer's total completed reviews for the current year.

### Available Badges

| Badge Name | Level | Threshold | Points | Description |
|------------|-------|-----------|--------|-------------|
| 1st Review Complete | ðŸ¥‰ Bronze | 1 review | 10 | Awarded for completing your first review |
| 5 Reviews Complete | ðŸ¥‰ Bronze | 5 reviews | 50 | Awarded for completing 5 reviews |
| 10 Reviews Complete | ðŸ¥ˆ Silver | 10 reviews | 100 | Awarded for completing 10 reviews |
| 25 Reviews Complete | ðŸ¥‡ Gold | 25 reviews | 250 | Awarded for completing 25 reviews |
| 50 Reviews Complete | ðŸ’Ž Platinum | 50 reviews | 500 | Awarded for completing 50 reviews |
| 100 Reviews Complete | ðŸ’  Diamond | 100 reviews | 1,000 | Awarded for completing 100 reviews |

### Badge Criteria
- **Scope:** Current year only (resets annually)
- **Trigger:** Automatic when review is marked as COMPLETED
- **Timing:** Instant (within seconds of completing review)
- **Location:** Apps â†’ Achievements â†’ Signals â†’ `check_reviewer_badges()`

### Example Flow
```
1. Reviewer completes review â†’ ReviewAssignment.status = 'COMPLETED'
2. Signal fires immediately â†’ check_reviewer_badges()
3. System counts total reviews this year
4. All applicable badges are awarded automatically
5. User sees new badge in /reviewer/achievements
```

---

## ðŸ“š Author Badges

### How They Work
Badges are **automatically awarded in real-time** when an author's submission is accepted or published. The system uses Django signals to detect when a `Submission` status changes to `ACCEPTED` or `PUBLISHED` and immediately awards all applicable badges based on the author's total publications for the current year.

### Available Badges

| Badge Name | Level | Threshold | Points | Description |
|------------|-------|-----------|--------|-------------|
| 1st Publication | ðŸ¥‰ Bronze | 1 publication | 20 | Awarded for your first accepted/published paper |
| 3 Publications | ðŸ¥ˆ Silver | 3 publications | 60 | Awarded for 3 accepted/published papers |
| 5 Publications | ðŸ¥‡ Gold | 5 publications | 100 | Awarded for 5 accepted/published papers |
| 10 Publications | ðŸ’Ž Platinum | 10 publications | 200 | Awarded for 10 accepted/published papers |
| 20 Publications | ðŸ’  Diamond | 20 publications | 400 | Awarded for 20 accepted/published papers |

### Badge Criteria
- **Scope:** Current year only (resets annually)
- **Trigger:** Automatic when submission is ACCEPTED or PUBLISHED
- **Timing:** Instant (within seconds of acceptance)
- **Location:** Apps â†’ Achievements â†’ Signals â†’ `check_author_badges()`

### Example Flow
```
1. Editor accepts submission â†’ Submission.status = 'ACCEPTED'
2. Signal fires immediately â†’ check_author_badges()
3. System counts total publications this year
4. All applicable badges are awarded automatically
5. User sees new badge in /author/achievements
```

---

## ðŸ† Reviewer Awards

### How They Work
Awards are **automatically generated by scheduled Celery tasks** that run periodically to identify and recognize outstanding reviewers.

### Available Awards

#### 1. Best Reviewer Award
- **Type:** `BEST_REVIEWER`
- **Schedule:** Annually (January 1st)
- **Scope:** Per journal
- **Criteria:** 
  - Minimum 5 completed reviews in previous year
  - Highest review count for that journal
- **Metrics Tracked:**
  - `reviews_completed`: Total reviews
  - `avg_quality`: Average quality score (if available)
- **Generated By:** `generate_yearly_awards()` Celery task

#### 2. Excellence in Review Award
- **Type:** `EXCELLENCE_REVIEW`
- **Schedule:** Monthly (1st of each month)
- **Scope:** Per journal
- **Criteria:**
  - Minimum 3 completed reviews in previous month
  - Highest review count for that journal in the month
- **Metrics Tracked:**
  - `reviews_completed`: Reviews in month
  - `quality_score`: Average quality
  - `month`: Month awarded for
- **Generated By:** `generate_monthly_awards()` Celery task

#### 3. Top Contributor Award
- **Type:** `TOP_CONTRIBUTOR`
- **Schedule:** Annually (January 1st) or manually
- **Scope:** Per journal
- **Criteria:**
  - Significant contributions as both reviewer and author
  - Combined reviews and publications
- **Metrics Tracked:**
  - `reviews`: Total reviews
  - `publications`: Total publications
- **Generated By:** `generate_yearly_awards()` or manual creation

---

## ðŸŒŸ Author Awards

### How They Work
Awards are **automatically generated by scheduled Celery tasks** that run periodically to identify and recognize outstanding researchers.

### Available Awards

#### 1. Researcher of the Year
- **Type:** `RESEARCHER_OF_YEAR`
- **Schedule:** Annually (January 1st)
- **Scope:** Per journal
- **Criteria:**
  - Minimum 3 accepted/published papers in previous year
  - Highest publication count for that journal
- **Metrics Tracked:**
  - `publications`: Total publications
  - `citations`: Total citations (if available)
- **Generated By:** `generate_yearly_awards()` Celery task

#### 2. Rising Star Award
- **Type:** `RISING_STAR`
- **Schedule:** Manual or future automation
- **Scope:** Per journal or global
- **Criteria:**
  - Early-career researcher
  - Minimum 3 publications
  - High impact factor
- **Metrics Tracked:**
  - `publications`: Publication count
  - `impact_factor`: Average impact factor
- **Generated By:** Manual creation or future criteria

#### 3. Lifetime Achievement Award
- **Type:** `LIFETIME_ACHIEVEMENT`
- **Schedule:** Manual
- **Scope:** Global or per journal
- **Criteria:**
  - Distinguished career (typically senior researchers)
  - Minimum 100+ total publications
  - Significant impact on field
- **Metrics Tracked:**
  - `total_publications`: Career publications
  - `total_citations`: Career citations
  - `years_active`: Years of contributions
- **Generated By:** Manual creation by administrators

#### 4. Top Contributor Award
- **Type:** `TOP_CONTRIBUTOR`
- **Schedule:** Annually (January 1st) or manually
- **Scope:** Per journal
- **Criteria:**
  - Significant contributions as both reviewer and author
  - Combined reviews and publications
- **Metrics Tracked:**
  - `reviews`: Total reviews
  - `publications`: Total publications
- **Generated By:** `generate_yearly_awards()` or manual creation

---

## ðŸ“Š Leaderboards

### How They Work
Leaderboards are **automatically updated daily** by a Celery Beat task that recalculates rankings based on current year performance.

### Reviewer Leaderboard
- **Category:** `REVIEWER`
- **Update Schedule:** Daily (every 24 hours)
- **Rankings:** Top 100 reviewers
- **Scoring System:** 10 points per completed review
- **Metrics:**
  - `reviews_completed`: Number of reviews
- **Period:** Current year (YEARLY)
- **Updated By:** `update_leaderboards()` Celery task

### Author Leaderboard
- **Category:** `AUTHOR`
- **Update Schedule:** Daily (every 24 hours)
- **Rankings:** Top 100 authors
- **Scoring System:** 20 points per publication
- **Metrics:**
  - `publications`: Number of accepted/published papers
- **Period:** Current year (YEARLY)
- **Updated By:** `update_leaderboards()` Celery task

### Leaderboard Features
- Rankings reset annually
- Top 100 users per category
- Scores calculated based on contributions
- Viewable at `/author/achievements` and `/reviewer/achievements`
- Filterable by period (MONTHLY, QUARTERLY, YEARLY, ALL_TIME)

---

## ðŸ¤– Automation Schedule

### Real-Time (Immediate)
| Trigger | Action | Location |
|---------|--------|----------|
| Review completed | Award reviewer badges | `apps/achievements/signals.py` |
| Submission accepted/published | Award author badges | `apps/achievements/signals.py` |

### Daily (Every 24 hours)
| Task | Description | Location |
|------|-------------|----------|
| `update_leaderboards` | Recalculate top 100 reviewers and authors | `apps/achievements/tasks.py` |

### Monthly (1st of each month)
| Task | Description | Location |
|------|-------------|----------|
| `generate_monthly_awards` | Create Excellence in Review awards | `apps/achievements/tasks.py` |

### Yearly (January 1st)
| Task | Description | Location |
|------|-------------|----------|
| `generate_yearly_awards` | Create Best Reviewer and Researcher of Year awards | `apps/achievements/tasks.py` |

---

## ðŸ“ User Access Points

### For Reviewers
- **Path:** `/reviewer/achievements`
- **Shows:**
  - Reviewer badges earned
  - Reviewer awards received
  - Reviewer leaderboard position
  - Available badges to earn

### For Authors
- **Path:** `/author/achievements`
- **Shows:**
  - Author badges earned
  - Author awards received
  - Author leaderboard position
  - Available badges to earn

---

## ðŸ”§ Technical Details

### Badge Award Logic
```python
# When threshold met, all applicable badges awarded
thresholds = [1, 5, 10, 25, 50, 100]  # Reviews
if user_reviews >= threshold:
    award_badge(user, badge)
```

### Award Generation Logic
```python
# Best reviewer: highest review count per journal
reviewer_stats = ReviewAssignment.objects.filter(
    journal=journal,
    status='COMPLETED',
    completed_at__year=previous_year
).values('reviewer').annotate(
    reviews_count=Count('id')
).order_by('-reviews_count').first()
```

### Leaderboard Calculation
```python
# Daily recalculation of top 100
score = reviews_count * 10  # Reviewers
score = publications_count * 20  # Authors
```

### Database Models
- **Badge:** Badge definitions (REVIEWER/AUTHOR types)
- **UserBadge:** User's earned badges with year and journal
- **Award:** Awards with recipient, type, year, and metrics
- **Leaderboard:** Rankings with category, period, rank, and score

---

## ðŸŽ¯ Future Enhancements

Potential additions to the achievements system:

1. **Monthly Leaderboards** - Track top performers per month
2. **Quarterly Awards** - Mid-year recognition
3. **Field-Specific Awards** - Awards per research discipline
4. **Collaboration Badges** - For co-authorship and team reviews
5. **Quality Badges** - Based on review quality scores
6. **Speed Badges** - For timely review completion
7. **Mentor Badges** - For helping train new reviewers
8. **Citation Impact Badges** - Based on publication citations

---

## ðŸ“š API Endpoints

### Badges
- `GET /api/v1/achievements/badges/` - List all available badges
- `GET /api/v1/achievements/user-badges/my_badges/` - Get current user's badges

### Awards
- `GET /api/v1/achievements/awards/` - List all awards
- `GET /api/v1/achievements/awards/{id}/` - Get specific award details

### Leaderboards
- `GET /api/v1/achievements/leaderboards/` - List all leaderboard entries
- `GET /api/v1/achievements/leaderboards/?category=AUTHOR` - Filter by category
- `GET /api/v1/achievements/leaderboards/?period=YEARLY` - Filter by period
- `GET /api/v1/achievements/leaderboards/top_reviewers/` - Top reviewers endpoint

---

## ðŸ’¡ Notes

- All badges and leaderboards are **year-based** and reset annually on January 1st
- Awards are **permanent** and remain in the user's profile forever
- The system is **fully automatic** - no manual intervention required for badges and most awards
- Celery Beat must be running for scheduled tasks (awards, leaderboards)
- In development mode, tasks run synchronously without requiring Redis/Celery worker

---

*Last Updated: December 21, 2025*
